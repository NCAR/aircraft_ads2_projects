#! /bin/csh -f
#
#  Archive Quick-Time movie files for the project:
#    2005-135 RICO (Rain In Cumulus over the Ocean) (Bob Rauber, Harry Ochs, et al.)
#   using the new ATD directory path
#   (files digested from the forward-looking digital camera and production
#    LRT netCDF files and assembled by Stuart Beaton)
#
#  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
#  *  Copyright 2005                                                         *
#  *  University Corporation for Atmospheric Research, All Rights Reserved.  *
#  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
#
#  Note:  This script runs only in a project's "Production/archive"
#          subdirectory under the "dmg" login.
#
#  File adapted from file $LOCAL/proj/135/archprodnc_L.135 with help from
#   the file $LOCAL/proj/135/archskel.135
#   by Ron Ruth   5 July 2005
#  Revised by RLR
#
#  To find executable (non-comment) lines (from within `vi'), type:
#   /^[^#]
#
#  Check login (only "dmg" login allowed to run this script)
set user = `whoami`
if ($user != "dmg") then
  echo "${0}:  Only the 'dmg' login is allowed to run this script.  Quitting."
  exit 1
endif
#
#  Set machine on which "msrcp" is to run
if ($?MSRCP_MACH) then
  set msrcpMachine = $MSRCP_MACH
else
  set msrcpMachine = "bora"
# set msrcpMachine = "vivaldi"
# set msrcpMachine = "mahler"
# set msrcpMachine = "mistral"
endif
#
#   MSS retention period (days)
set PE = "32767"
#   SCD Project number for this archive
set PR = "41113009"
#   Write password for MSS file(s)
set WPWD = "RAFDMG"
#   Read password for MSS file(s), if needed
set RPWD = ""
#
set SDIR = "/h/9/beaton/135Movies"
#
#  1st wave (aborted due to incorrect MSS bitfile names)
#set SFILES = ( \
#135ff02.mov \
#135rf01.mov \
#135rf02.mov \
#135rf03.mov \
#)
#set DFILES = ( \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/FF02.20041204.13580_64921.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF01.20041207.16104_04404.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF02.20041208.14150_62338.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF03.20041209.14040_21724.mov \
#)
##:'a,'bs#\(....\).\(..\).\(..\).\(....\)...\(.....\)......\(.*\)#mss:/ATD/DATA/\4/RICO/C130_N130AR/CAMERA/\1.\4\2\3.\5_\6.mov \\
#
#  2nd wave
#set SFILES = ( \
#135ff02.mov \
#135rf01.mov \
#135rf02.mov \
#135rf03.mov \
#135rf04.mov \
#135rf05.mov \
#135rf06.mov \
#135rf07.mov \
#135rf08.mov \
#135rf09.mov \
#135rf10.mov \
#135rf11.mov \
#135rf12.mov \
#135rf13.mov \
#135rf14.mov \
#135rf15.mov \
#135rf16.mov \
#135rf17.mov \
#135rf18.mov \
#135rf19.mov \
#135ff05.mov \
#)
#set DFILES = ( \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/FF02.20041204.135800_164921.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF01.20041207.161042_204404.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF02.20041208.141500_162338.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF03.20041209.140400_221724.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF04.20041210.141130_213400.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF05.20041213.145200_220400.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF06.20041216.135900_213350.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF07.20041217.142545_222215.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF08.20041219.111100_195400.mov \
#mss:/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF09.20041220.105800_190540.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF10.20050105.145200_225836.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF11.20050107.140200_222100.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF12.20050111.140300_223130.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF13.20050112.142300_224630.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF14.20050114.150200_224206.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF15.20050116.141210_222700.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF16.20050118.112845_191157.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF17.20050119.115200_201900.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF18.20050123.100300_283100.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF19.20050124.100300_274200.mov \
#mss:/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/FF05.20050126.143100_200700.mov \
#)
#
#  3rd wave (Remove bogus files from 1st wave)
#echo "#  4 remove job(s) submitted on `date`"
##echo \
#msrm -wpwd $WPWD /ATD/DATA/2004/RICO/C130_N130AR/CAMERA/FF02.20041204.13580_64921.mov
#if ($status == 0) then
#  echo "#   CAMERA/FF02.20041204.13580_64921.mov -- OK -- `date`"
#endif
##echo \
#msrm -wpwd $WPWD /ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF01.20041207.16104_04404.mov
#if ($status == 0) then
#  echo "#   CAMERA/RF01.20041207.16104_04404.mov -- OK -- `date`"
#endif
##echo \
#msrm -wpwd $WPWD /ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF02.20041208.14150_62338.mov
#if ($status == 0) then
#  echo "#   CAMERA/RF02.20041208.14150_62338.mov -- OK -- `date`"
#endif
##echo \
#msrm -wpwd $WPWD /ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF03.20041209.14040_21724.mov
#if ($status == 0) then
#  echo "#   CAMERA/RF03.20041209.14040_21724.mov -- OK -- `date`"
#endif
#echo "#   Completed on `date`"
#exit
#
#  4th wave (Rename bitfiles to include "FWD" in the path)
#set SFILES = ( \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/FF02.20041204.135800_164921.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF01.20041207.161042_204404.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF02.20041208.141500_162338.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF03.20041209.140400_221724.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF04.20041210.141130_213400.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF05.20041213.145200_220400.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF06.20041216.135900_213350.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF07.20041217.142545_222215.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF08.20041219.111100_195400.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF09.20041220.105800_190540.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF10.20050105.145200_225836.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF11.20050107.140200_222100.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF12.20050111.140300_223130.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF13.20050112.142300_224630.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF14.20050114.150200_224206.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF15.20050116.141210_222700.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF16.20050118.112845_191157.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF17.20050119.115200_201900.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF18.20050123.100300_283100.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF19.20050124.100300_274200.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/FF05.20050126.143100_200700.mov \
#)
#set DFILES = ( \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/FF02.FWD.20041204.135800_164921.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF01.FWD.20041207.161042_204404.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF02.FWD.20041208.141500_162338.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF03.FWD.20041209.140400_221724.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF04.FWD.20041210.141130_213400.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF05.FWD.20041213.145200_220400.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF06.FWD.20041216.135900_213350.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF07.FWD.20041217.142545_222215.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF08.FWD.20041219.111100_195400.mov \
#/ATD/DATA/2004/RICO/C130_N130AR/CAMERA/RF09.FWD.20041220.105800_190540.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF10.FWD.20050105.145200_225836.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF11.FWD.20050107.140200_222100.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF12.FWD.20050111.140300_223130.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF13.FWD.20050112.142300_224630.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF14.FWD.20050114.150200_224206.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF15.FWD.20050116.141210_222700.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF16.FWD.20050118.112845_191157.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF17.FWD.20050119.115200_201900.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF18.FWD.20050123.100300_283100.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/RF19.FWD.20050124.100300_274200.mov \
#/ATD/DATA/2005/RICO/C130_N130AR/CAMERA/FF05.FWD.20050126.143100_200700.mov \
#)
#
#   th wave
#set SFILES = ( \
#)
#set DFILES = ( \
#)
#
#
echo "#  $#SFILES job(s) submitted on `date`"
echo "#  File(s) archived to MSS directory:  /ATD/DATA/yyyy/RICO/C130_N130AR/"
#
set todo = $#SFILES
set num = 1
while ($num <= $todo)
  set SFILE = $SFILES[$num]
  set DFILE = $DFILES[$num]
#   Rename code start
#  echo \
#  msmv -wpwd $WPWD $SFILE $DFILE
#   Rename code end
  if (-r $SDIR/$SFILE) then
    echo \
    rsh $msrcpMachine msput_job -pe $PE -pr $PR -wpwd $WPWD $RPWD $SDIR/$SFILE $DFILE
    if ($status == 0) then
      set d2 = $DFILE:h
      set d1 = $d2:t
      set d2 = $DFILE:t
      echo "#   $d1/$d2 -- OK -- `date`"
    else
      echo "  msrcp job FAILED.  See email message for details."
    endif
  else
     echo " Cannot access file $SDIR/$SFILE"
  endif
  @ num ++
end
#
# Done
echo "#   Completed on `date`"
exit
#
#
#  1st wave
#  21 job(s) submitted on Tue Jul  5 16:21:12 MDT 2005
#  File(s) archived to MSS directory:  /ATD/DATA/yyyy/RICO/C130_N130AR/
#   CAMERA/FF02.20041204.13580_64921.mov -- OK -- Tue Jul  5 16:21:52 MDT 2005
#   CAMERA/RF01.20041207.16104_04404.mov -- OK -- Tue Jul  5 16:23:05 MDT 2005
#   CAMERA/RF02.20041208.14150_62338.mov -- OK -- Tue Jul  5 16:23:34 MDT 2005
#   CAMERA/RF03.20041209.14040_21724.mov -- Aborted
#
#  2nd wave
#  21 job(s) submitted on Tue Jul  5 16:33:56 MDT 2005
#  File(s) archived to MSS directory:  /ATD/DATA/yyyy/RICO/C130_N130AR/
#   CAMERA/FF02.20041204.135800_164921.mov -- OK -- Tue Jul  5 16:34:29 MDT 2005
#   CAMERA/RF01.20041207.161042_204404.mov -- OK -- Tue Jul  5 16:35:41 MDT 2005
#   CAMERA/RF02.20041208.141500_162338.mov -- OK -- Tue Jul  5 16:36:05 MDT 2005
#   CAMERA/RF03.20041209.140400_221724.mov -- OK -- Tue Jul  5 16:38:18 MDT 2005
#   CAMERA/RF04.20041210.141130_213400.mov -- OK -- Tue Jul  5 16:40:12 MDT 2005
#   CAMERA/RF05.20041213.145200_220400.mov -- OK -- Tue Jul  5 16:42:18 MDT 2005
#   CAMERA/RF06.20041216.135900_213350.mov -- OK -- Tue Jul  5 16:45:14 MDT 2005
#   CAMERA/RF07.20041217.142545_222215.mov -- OK -- Tue Jul  5 16:46:57 MDT 2005
#   CAMERA/RF08.20041219.111100_195400.mov -- OK -- Tue Jul  5 16:50:10 MDT 2005
#   CAMERA/RF09.20041220.105800_190540.mov -- OK -- Tue Jul  5 16:52:25 MDT 2005
#   CAMERA/RF10.20050105.145200_225836.mov -- OK -- Tue Jul  5 16:54:51 MDT 2005
#   CAMERA/RF11.20050107.140200_222100.mov -- OK -- Tue Jul  5 16:56:46 MDT 2005
#   CAMERA/RF12.20050111.140300_223130.mov -- OK -- Tue Jul  5 16:58:28 MDT 2005
#   CAMERA/RF13.20050112.142300_224630.mov -- OK -- Tue Jul  5 17:00:52 MDT 2005
#   CAMERA/RF14.20050114.150200_224206.mov -- OK -- Tue Jul  5 17:02:19 MDT 2005
#   CAMERA/RF15.20050116.141210_222700.mov -- OK -- Tue Jul  5 17:03:53 MDT 2005
#   CAMERA/RF16.20050118.112845_191157.mov -- OK -- Tue Jul  5 17:05:26 MDT 2005
#   CAMERA/RF17.20050119.115200_201900.mov -- OK -- Tue Jul  5 17:07:24 MDT 2005
#   CAMERA/RF18.20050123.100300_283100.mov -- OK -- Tue Jul  5 17:10:08 MDT 2005
#   CAMERA/RF19.20050124.100300_274200.mov -- OK -- Tue Jul  5 17:11:59 MDT 2005
#   CAMERA/FF05.20050126.143100_200700.mov -- OK -- Tue Jul  5 17:13:21 MDT 2005
#   Completed on Tue Jul  5 17:13:21 MDT 2005
#
#  3rd wave (Remove bogus files from 1st wave)
#  4 remove job(s) submitted on Tue Jul  5 22:48:50 MDT 2005
#   CAMERA/FF02.20041204.13580_64921.mov -- OK -- Tue Jul  5 22:48:51 MDT 2005
#   CAMERA/RF01.20041207.16104_04404.mov -- OK -- Tue Jul  5 22:48:52 MDT 2005
#   CAMERA/RF02.20041208.14150_62338.mov -- OK -- Tue Jul  5 22:48:54 MDT 2005
#   CAMERA/RF03.20041209.14040_21724.mov -- OK -- Tue Jul  5 22:48:54 MDT 2005
#   Completed on Tue Jul  5 22:48:54 MDT 2005
#
#  4th wave (Rename files to include "FWD" in the path)
#  21 job(s) submitted on Tue Jul  5 22:55:28 MDT 2005
#  File(s) moved to MSS directory:  /ATD/DATA/yyyy/RICO/C130_N130AR/
#   CAMERA/FF02.FWD.20041204.135800_164921.mov -- OK -- Tue Jul  5 22:55:29 MDT 2005
#   CAMERA/RF01.FWD.20041207.161042_204404.mov -- OK -- Tue Jul  5 22:55:30 MDT 2005
#   CAMERA/RF02.FWD.20041208.141500_162338.mov -- OK -- Tue Jul  5 22:55:30 MDT 2005
#   CAMERA/RF03.FWD.20041209.140400_221724.mov -- OK -- Tue Jul  5 22:55:31 MDT 2005
#   CAMERA/RF04.FWD.20041210.141130_213400.mov -- OK -- Tue Jul  5 22:55:31 MDT 2005
#   CAMERA/RF05.FWD.20041213.145200_220400.mov -- OK -- Tue Jul  5 22:55:32 MDT 2005
#   CAMERA/RF06.FWD.20041216.135900_213350.mov -- OK -- Tue Jul  5 22:55:33 MDT 2005
#   CAMERA/RF07.FWD.20041217.142545_222215.mov -- OK -- Tue Jul  5 22:55:33 MDT 2005
#   CAMERA/RF08.FWD.20041219.111100_195400.mov -- OK -- Tue Jul  5 22:55:34 MDT 2005
#   CAMERA/RF09.FWD.20041220.105800_190540.mov -- OK -- Tue Jul  5 22:55:35 MDT 2005
#   CAMERA/RF10.FWD.20050105.145200_225836.mov -- OK -- Tue Jul  5 22:55:36 MDT 2005
#   CAMERA/RF11.FWD.20050107.140200_222100.mov -- OK -- Tue Jul  5 22:55:36 MDT 2005
#   CAMERA/RF12.FWD.20050111.140300_223130.mov -- OK -- Tue Jul  5 22:55:37 MDT 2005
#   CAMERA/RF13.FWD.20050112.142300_224630.mov -- OK -- Tue Jul  5 22:55:37 MDT 2005
#   CAMERA/RF14.FWD.20050114.150200_224206.mov -- OK -- Tue Jul  5 22:55:38 MDT 2005
#   CAMERA/RF15.FWD.20050116.141210_222700.mov -- OK -- Tue Jul  5 22:55:39 MDT 2005
#   CAMERA/RF16.FWD.20050118.112845_191157.mov -- OK -- Tue Jul  5 22:55:39 MDT 2005
#   CAMERA/RF17.FWD.20050119.115200_201900.mov -- OK -- Tue Jul  5 22:55:40 MDT 2005
#   CAMERA/RF18.FWD.20050123.100300_283100.mov -- OK -- Tue Jul  5 22:55:41 MDT 2005
#   CAMERA/RF19.FWD.20050124.100300_274200.mov -- OK -- Tue Jul  5 22:55:41 MDT 2005
#   CAMERA/FF05.FWD.20050126.143100_200700.mov -- OK -- Tue Jul  5 22:55:42 MDT 2005
#   Completed on Tue Jul  5 22:55:42 MDT 2005
#
#   th wave
#
